FROM node:20-slim

WORKDIR /app

# העתקת קבצי ניהול חבילות (אם קיימים בתיקיית הלקוח)
COPY package*.json ./

# התקנת תלויות (כולל Jest עבור הטסטים)
RUN npm install

# העתקת שאר קבצי התוסף
COPY . .

# פקודת ברירת המחדל תהיה להריץ טסטים
# זה מאפשר ל-Jenkins להריץ את הקונטיינר הזה ולראות אם הלקוח תקין
CMD ["npm", "test"]